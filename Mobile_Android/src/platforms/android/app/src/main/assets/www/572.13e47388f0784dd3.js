"use strict";(self.webpackChunkmoneyguard=self.webpackChunkmoneyguard||[]).push([[572],{8572:(z,T,i)=>{i.r(T),i.d(T,{UsersModule:()=>E});var b=i(7612),d=i(9808),f=i(1787),Z=i(263),C=i(5861),n=i(3075),m=i(8966),e=i(5e3),c=i(4218),v=i(9224),h=i(7423);const M=function(o){return{user:o}};let I=(()=>{class o{constructor(t,r,a){this.dialogRef=t,this.translate=r,this.data=a}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(m.so),e.Y36(c.sK),e.Y36(m.WI))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-welcome"]],decls:11,vars:12,consts:[["mat-dialog-title",""],["mat-button","","mat-dialog-close",""]],template:function(t,r){1&t&&(e.TgZ(0,"h2",0),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"mat-dialog-content"),e.TgZ(4,"mat-card"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.qZA(),e.TgZ(7,"mat-dialog-actions"),e.TgZ(8,"button",1),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Oqu(e.xi3(2,3,"welcome.hello",e.VKq(10,M,r.data.user.name))),e.xp6(4),e.Oqu(e.lcZ(6,6,"welcome.message")),e.xp6(4),e.Oqu(e.lcZ(10,8,"signup.goToLogin")))},directives:[m.uh,m.xY,v.a8,m.H8,h.lW,m.ZT],pipes:[c.X$],styles:[".mat-card[_ngcontent-%COMP%]{margin-bottom:10px}"]}),o})();var A=i(3905),F=i(4832),x=i(3441),q=i(7261),p=i(7322),_=i(7531),g=i(6856),U=i(4107),O=i(3874),w=i(508),y=i(773);function N(o,l){if(1&o&&(e.TgZ(0,"mat-option",21),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function J(o,l){if(1&o&&(e.TgZ(0,"mat-option",21),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function L(o,l){1&o&&e._UZ(0,"mat-spinner",22),2&o&&e.Q6J("diameter",30)}let S=(()=>{class o{constructor(t,r,a,s,u,$,G,X){this.formBuilder=t,this.usersService=r,this._helperService=a,this.helperService=s,this.router=u,this.welcomeDialog=$,this.translate=G,this.snackBar=X,this.startDate=new Date((new Date).getFullYear()-20,0,1),this.loading=!1,this.loginUrl=Z.r.LOGIN}ngOnInit(){this.registerForm=this.formBuilder.group({emailFormControl:["",[n.kI.required,n.kI.email]],fechaNacimientoFormControl:["",[n.kI.required]],nameFormControl:["",[n.kI.required]],passwordFormControl:["",[n.kI.required]],passwordRepeatFormControl:[""],monedaFormControl:["",[n.kI.required]],languageFormControl:["",[n.kI.required]]},{validator:this.usersService.checkPasswords}),this.monedas=this.usersService.getAvailablesCurrencies()}register(){var t=this;return(0,C.Z)(function*(){t.loading=!0;const r=t.createUser(),a=t.usersService.register(r);try{yield(0,A.z)(a),t.loading=!1,t.dialogRef=t.welcomeDialog.open(I,{data:{user:r}}),t.dialogRef.afterClosed().subscribe(()=>{t.router.navigate([Z.r.LOGIN])})}catch(s){t.loading=!1,t._helperService.showSnackBarError(t.snackBar,t._helperService.getErrorMessage(s))}})()}selectLang(t){console.log(this.translate),this.translate.use(t.value)}createUser(){return{email:this.registerForm.value.emailFormControl,bornDate:this.registerForm.value.fechaNacimientoFormControl,currency:this.registerForm.value.monedaFormControl,language:this.registerForm.value.languageFormControl,name:this.registerForm.value.nameFormControl,entryDate:null,id:null,statusId:null,password:this.registerForm.value.passwordFormControl}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(n.qu),e.Y36(F.f),e.Y36(x.W),e.Y36(x.W),e.Y36(f.F0),e.Y36(m.uw),e.Y36(c.sK),e.Y36(q.ux))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-registracion"]],decls:68,vars:51,consts:[[1,"registerContainer"],[1,"register"],["novalidate","",1,"full-width-form",3,"formGroup","ngSubmit"],["appearance","outline",1,"formfield-full-width"],["matInput","","formControlName","nameFormControl",3,"placeholder"],["matInput","","formControlName","emailFormControl",3,"placeholder"],["matInput","","readonly","","formControlName","fechaNacimientoFormControl",3,"matDatepicker","placeholder","click"],["matSuffix","",3,"for"],["startView","multi-year",3,"startAt"],["picker",""],["formControlName","monedaFormControl"],[3,"value",4,"ngFor","ngForOf"],["formControlName","languageFormControl",3,"selectionChange"],["matInput","","type","password","formControlName","passwordFormControl",3,"placeholder"],["matInput","","type","password","formControlName","passwordRepeatFormControl",3,"placeholder"],[1,"buttons-section"],[1,"login-container"],["mat-button","","color","login",3,"routerLink"],[1,"register-button-container"],["mat-raised-button","","type","submit","color","primary",3,"disabled"],[3,"diameter",4,"ngIf"],[3,"value"],[3,"diameter"]],template:function(t,r){if(1&t){const a=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"p"),e.TgZ(3,"mat-card-title"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.qZA(),e.TgZ(6,"form",2),e.NdJ("ngSubmit",function(){return r.register()}),e.TgZ(7,"div"),e.TgZ(8,"mat-form-field",3),e.TgZ(9,"mat-label"),e._uU(10),e.ALo(11,"translate"),e.qZA(),e._UZ(12,"input",4),e.ALo(13,"translate"),e.qZA(),e.qZA(),e.TgZ(14,"div"),e.TgZ(15,"mat-form-field",3),e.TgZ(16,"mat-label"),e._uU(17),e.ALo(18,"translate"),e.qZA(),e._UZ(19,"input",5),e.ALo(20,"translate"),e.qZA(),e.qZA(),e.TgZ(21,"div"),e.TgZ(22,"mat-form-field",3),e.TgZ(23,"input",6),e.NdJ("click",function(){return e.CHM(a),e.MAs(27).open()}),e.ALo(24,"translate"),e.qZA(),e._UZ(25,"mat-datepicker-toggle",7),e._UZ(26,"mat-datepicker",8,9),e.qZA(),e.qZA(),e.TgZ(28,"div"),e.TgZ(29,"mat-form-field",3),e.TgZ(30,"mat-label"),e._uU(31),e.ALo(32,"translate"),e.qZA(),e.TgZ(33,"mat-select",10),e.YNc(34,N,2,2,"mat-option",11),e.qZA(),e.qZA(),e.qZA(),e.TgZ(35,"div"),e.TgZ(36,"mat-form-field",3),e.TgZ(37,"mat-label"),e._uU(38),e.ALo(39,"translate"),e.qZA(),e.TgZ(40,"mat-select",12),e.NdJ("selectionChange",function(u){return r.selectLang(u)}),e.YNc(41,J,2,2,"mat-option",11),e.qZA(),e.qZA(),e.qZA(),e.TgZ(42,"div"),e.TgZ(43,"mat-form-field",3),e.TgZ(44,"mat-label"),e._uU(45),e.ALo(46,"translate"),e.qZA(),e._UZ(47,"input",13),e.ALo(48,"translate"),e.qZA(),e.qZA(),e.TgZ(49,"div"),e.TgZ(50,"mat-form-field",3),e.TgZ(51,"mat-label"),e._uU(52),e.ALo(53,"translate"),e.qZA(),e._UZ(54,"input",14),e.ALo(55,"translate"),e.qZA(),e.qZA(),e.TgZ(56,"div",15),e.TgZ(57,"div",16),e.TgZ(58,"a",17),e._uU(59),e.ALo(60,"translate"),e.qZA(),e.qZA(),e.TgZ(61,"div",18),e.TgZ(62,"button",19),e._uU(63),e.ALo(64,"translate"),e.TgZ(65,"mat-icon"),e._uU(66,"how_to_reg"),e.qZA(),e.qZA(),e.YNc(67,L,1,1,"mat-spinner",20),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&t){const a=e.MAs(27);e.xp6(4),e.Oqu(e.lcZ(5,23,"signup.signup")),e.xp6(2),e.Q6J("formGroup",r.registerForm),e.xp6(4),e.Oqu(e.lcZ(11,25,"signup.name")),e.xp6(2),e.s9C("placeholder",e.lcZ(13,27,"signup.name")),e.xp6(5),e.Oqu(e.lcZ(18,29,"signup.email")),e.xp6(2),e.s9C("placeholder",e.lcZ(20,31,"signup.email")),e.xp6(4),e.s9C("placeholder",e.lcZ(24,33,"signup.bornDate")),e.Q6J("matDatepicker",a),e.xp6(2),e.Q6J("for",a),e.xp6(1),e.Q6J("startAt",r.startDate),e.xp6(5),e.Oqu(e.lcZ(32,35,"signup.currency")),e.xp6(3),e.Q6J("ngForOf",r.monedas),e.xp6(4),e.Oqu(e.lcZ(39,37,"signup.language")),e.xp6(3),e.Q6J("ngForOf",r.translate.langs),e.xp6(4),e.Oqu(e.lcZ(46,39,"signup.password")),e.xp6(2),e.s9C("placeholder",e.lcZ(48,41,"signup.password")),e.xp6(5),e.Oqu(e.lcZ(53,43,"signup.repeatPassword")),e.xp6(2),e.s9C("placeholder",e.lcZ(55,45,"signup.repeatPassword")),e.xp6(4),e.Q6J("routerLink",r.loginUrl),e.xp6(1),e.Oqu(e.lcZ(60,47,"signup.goToLogin")),e.xp6(3),e.Q6J("disabled",!r.registerForm.valid||r.loading),e.xp6(1),e.hij("",e.lcZ(64,49,"button.ok")," "),e.xp6(4),e.Q6J("ngIf",r.loading)}},directives:[v.n5,n._Y,n.JL,n.sg,p.KE,p.hX,_.Nt,n.Fj,n.JJ,n.u,g.hl,g.nW,p.R9,g.Mq,U.gD,d.sg,h.zs,f.yS,h.lW,O.Hw,d.O5,w.ey,y.$g],pipes:[c.X$],styles:[".registerContainer[_ngcontent-%COMP%]{padding-top:25px;text-align:center}div.register[_ngcontent-%COMP%]{width:500px;padding:10px 10px 0;border:1px solid #BFBFBF;box-shadow:10px 10px 5px #aaa;display:inline-block}.full-width-form[_ngcontent-%COMP%]{width:100%}.formfield-full-width[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%}.register-button-container[_ngcontent-%COMP%]{float:right;text-align:center}.buttons-section[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:50px}.mat-spinner[_ngcontent-%COMP%]{float:left;margin:5px 10px 0 0}.login-container[_ngcontent-%COMP%]{float:left;text-align:left}.mat-login[_ngcontent-%COMP%]{color:#2d9bce}@media only screen and (max-width: 600px){div.register[_ngcontent-%COMP%]{width:90%;margin-top:5px;margin-bottom:10px;box-shadow:none}}"]}),o})();function P(o,l){1&o&&(e.TgZ(0,"div",2),e._UZ(1,"mat-spinner",3),e.qZA())}function k(o,l){if(1&o&&(e.TgZ(0,"mat-option",20),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function Y(o,l){if(1&o&&(e.TgZ(0,"mat-option",20),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function B(o,l){1&o&&e._UZ(0,"mat-spinner",21),2&o&&e.Q6J("diameter",30)}function Q(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",4),e.TgZ(1,"div",5),e.TgZ(2,"p"),e.TgZ(3,"mat-card-title"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.qZA(),e.TgZ(6,"form",6),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw().changeProfile()}),e.TgZ(7,"div"),e.TgZ(8,"mat-form-field",7),e.TgZ(9,"mat-label"),e._uU(10),e.ALo(11,"translate"),e.qZA(),e._UZ(12,"input",8),e.ALo(13,"translate"),e.qZA(),e.qZA(),e.TgZ(14,"div"),e.TgZ(15,"mat-form-field",7),e.TgZ(16,"mat-label"),e._uU(17),e.ALo(18,"translate"),e.qZA(),e._UZ(19,"input",9),e.ALo(20,"translate"),e.qZA(),e.qZA(),e.TgZ(21,"div"),e.TgZ(22,"mat-form-field",7),e.TgZ(23,"input",10),e.NdJ("click",function(){return e.CHM(t),e.MAs(26).open()}),e.qZA(),e._UZ(24,"mat-datepicker-toggle",11),e._UZ(25,"mat-datepicker",null,12),e.qZA(),e.qZA(),e.TgZ(27,"div"),e.TgZ(28,"mat-form-field",7),e.TgZ(29,"mat-label"),e._uU(30),e.ALo(31,"translate"),e.qZA(),e.TgZ(32,"mat-select",13),e.YNc(33,k,2,2,"mat-option",14),e.qZA(),e.qZA(),e.qZA(),e.TgZ(34,"div"),e.TgZ(35,"mat-form-field",7),e.TgZ(36,"mat-label"),e._uU(37),e.ALo(38,"translate"),e.qZA(),e.TgZ(39,"mat-select",15),e.NdJ("selectionChange",function(a){return e.CHM(t),e.oxw().selectLang(a)}),e.YNc(40,Y,2,2,"mat-option",14),e.qZA(),e.qZA(),e.qZA(),e.TgZ(41,"div",16),e.TgZ(42,"div",17),e.TgZ(43,"button",18),e._uU(44),e.ALo(45,"translate"),e.TgZ(46,"mat-icon"),e._uU(47,"how_to_reg"),e.qZA(),e.qZA(),e.YNc(48,B,1,1,"mat-spinner",19),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.MAs(26),r=e.oxw();e.xp6(4),e.Oqu(e.lcZ(5,15,"userProfile.profile")),e.xp6(2),e.Q6J("formGroup",r.profileForm),e.xp6(4),e.Oqu(e.lcZ(11,17,"signup.name")),e.xp6(2),e.s9C("placeholder",e.lcZ(13,19,"signup.name")),e.xp6(5),e.Oqu(e.lcZ(18,21,"signup.email")),e.xp6(2),e.s9C("placeholder",e.lcZ(20,23,"signup.email")),e.xp6(4),e.Q6J("matDatepicker",t),e.xp6(1),e.Q6J("for",t),e.xp6(6),e.Oqu(e.lcZ(31,25,"signup.currency")),e.xp6(3),e.Q6J("ngForOf",r.monedas),e.xp6(4),e.Oqu(e.lcZ(38,27,"signup.language")),e.xp6(3),e.Q6J("ngForOf",r.translate.langs),e.xp6(3),e.Q6J("disabled",!r.profileForm.valid||r.profileForm.pristine||r.loadingAceptar),e.xp6(1),e.hij("",e.lcZ(45,29,"button.ok")," "),e.xp6(4),e.Q6J("ngIf",r.loadingAceptar)}}const D=[{path:Z.r.USERPROFILE,component:(()=>{class o{constructor(t,r,a,s,u){this._userService=t,this.formBuilder=r,this._helperService=a,this.translate=s,this.snackBar=u,this.loading=!1,this.loadingAceptar=!1}ngOnInit(){this.monedas=this._userService.getAvailablesCurrencies(),this.profileForm=this.formBuilder.group({emailFormControl:["",[n.kI.required,n.kI.email]],fechaNacimientoFormControl:["",[n.kI.required]],nameFormControl:["",[n.kI.required]],monedaFormControl:["",[n.kI.required]],languageFormControl:["",[n.kI.required]]}),this.getData()}getData(){var t=this;return(0,C.Z)(function*(){t.loading=!0;const r=t._userService.getProfile();try{const a=yield(0,A.z)(r);t.profileForm.setValue({emailFormControl:a.email,nameFormControl:a.name,fechaNacimientoFormControl:a.bornDate,monedaFormControl:a.currency,languageFormControl:a.language}),t.loading=!1}catch(a){t.loading=!1,t._helperService.showSnackBarError(t.snackBar,t._helperService.getErrorMessage(a))}})()}changeProfile(){var t=this;return(0,C.Z)(function*(){t.loadingAceptar=!0;const r=t.createUser(),a=t._userService.updateProfile(r);try{yield(0,A.z)(a),t._userService.setUserName(r.name),t._helperService.showSnackBarSuccess(t.snackBar,t.translate.instant("message.successfulOperation")),t.loadingAceptar=!1,t.profileForm.markAsPristine()}catch(s){t.loading=!1,t._helperService.showSnackBarError(t.snackBar,t._helperService.getErrorMessage(s))}})()}selectLang(t){this.translate.use(t.value)}createUser(){return{email:this.profileForm.value.emailFormControl,bornDate:new Date(this.profileForm.value.fechaNacimientoFormControl),currency:this.profileForm.value.monedaFormControl,language:this.profileForm.value.languageFormControl,name:this.profileForm.value.nameFormControl,entryDate:null,id:null,statusId:null,password:null}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(F.f),e.Y36(n.qu),e.Y36(x.W),e.Y36(c.sK),e.Y36(q.ux))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-userprofile"]],decls:2,vars:2,consts:[["class","loading",4,"ngIf"],["class","registerContainer",4,"ngIf"],[1,"loading"],["diameter","70","strokeWidth","5"],[1,"registerContainer"],[1,"register"],["novalidate","",1,"full-width-form",3,"formGroup","ngSubmit"],["appearance","outline",1,"formfield-full-width"],["matInput","","formControlName","nameFormControl",3,"placeholder"],["matInput","","formControlName","emailFormControl",3,"placeholder"],["matInput","","readonly","","formControlName","fechaNacimientoFormControl",3,"matDatepicker","click"],["matSuffix","",3,"for"],["picker",""],["formControlName","monedaFormControl"],[3,"value",4,"ngFor","ngForOf"],["formControlName","languageFormControl",3,"selectionChange"],[1,"buttons-section"],[1,"register-button-container"],["mat-raised-button","","type","submit","color","primary",3,"disabled"],[3,"diameter",4,"ngIf"],[3,"value"],[3,"diameter"]],template:function(t,r){1&t&&(e.YNc(0,P,2,0,"div",0),e.YNc(1,Q,49,31,"div",1)),2&t&&(e.Q6J("ngIf",r.loading),e.xp6(1),e.Q6J("ngIf",!r.loading))},directives:[d.O5,y.$g,v.n5,n._Y,n.JL,n.sg,p.KE,p.hX,_.Nt,n.Fj,n.JJ,n.u,g.hl,g.nW,p.R9,g.Mq,U.gD,d.sg,h.lW,O.Hw,w.ey],pipes:[c.X$],styles:[".registerContainer[_ngcontent-%COMP%]{padding-top:25px;text-align:center}div.register[_ngcontent-%COMP%]{width:500px;padding:10px 10px 0;border:1px solid #BFBFBF;box-shadow:10px 10px 5px #aaa;display:inline-block}.full-width-form[_ngcontent-%COMP%]{width:100%}.formfield-full-width[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%}.register-button-container[_ngcontent-%COMP%]{float:right;text-align:center}.buttons-section[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:50px}.mat-spinner[_ngcontent-%COMP%]{float:left;margin:5px 10px 0 0}.login-container[_ngcontent-%COMP%]{float:left;text-align:left}.mat-login[_ngcontent-%COMP%]{color:#2d9bce}@media only screen and (max-width: 600px){div.register[_ngcontent-%COMP%]{width:90%;margin-top:5px;margin-bottom:10px;box-shadow:none}}"]}),o})()},{path:Z.r.REGISTRACION,component:S}];let W=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[f.Bz.forChild(D)],f.Bz]}),o})(),E=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[d.ez,b.m,W,c.aw]]}),o})()}}]);